# Telegram Бот "Инквизиция" (Rust)

Telegram-бот для автоматической модерации группы.  
Блокирует сообщения от неподтверждённых пользователей и фильтрует запрещённые слова/фразы.  
Поддерживает секретный код для автоматического подтверждения.

---

## Как работает бот?

1. **Подтверждение участия**  
   - Новый пользователь пишет в группу → бот удаляет сообщение  
   - Пользователь должен написать  или кликнуть `/confirm` → добавляется в `whitelist.txt`  

2. **Секретный код**  
   - Любой может отправить секретный код в чат → автоматически попадает в белый список  

3. **Фильтрация сообщений**  
   - Сообщения проверяются на запрещённые паттерны из `forbidden_patterns.txt`  
   - Запрещённые сообщения удаляются, пользователь получает предупреждение  

4. **Права доступа**  
   - Только пользователи из `whitelist.txt` могут писать в группу  
   - Бот должен быть администратором с правами удаления сообщений  

---

## Требования

- Telegram бот (созданный через @BotFather)  
- Группа Telegram (с правами администратора для бота)  
- Файлы:  
  - `.env` (токен, ID группы, секретный код)  
  - `whitelist.txt` (список разрешённых пользователей)  
  - `forbidden_patterns.txt` (запрещённые слова/фразы)  
- Логирование: `bot.log`  

---

## Регистрация бота в Telegram

1. Найдите в Telegram пользователя `@BotFather`  
2. Отправьте `/newbot`  
3. Следуйте инструкциям:  
   - Придумайте имя бота  
   - Укажите юзернейм (должен заканчиваться на `bot` или `_bot`)  
4. Получите токен API → сохраните  

---

## Добавление бота в группу

1. Добавьте бота в группу  
2. Назначьте его **администратором** с правами:  
   - Удаление сообщений  
   - Просмотр списка участников  
---

## Настройка файлов

### `.env` — пример:
```env
VERIFICATION_BOT_TOKEN="ваш_токен"
GROUP_CHAT_ID=айди_группы
WHITELIST_FILE=whitelist.txt
FORBIDDEN_PATTERNS_FILE=forbidden_patterns.txt
SECRET_CODE=supersecret123
```

### `forbidden_patterns.txt` — формат запрещённых паттернов

Формат файла:
- Каждый паттерн на новой строке
- Пустые строки игнорируются

**Правила:**
1. `без_звёздочки` → удаляет сообщения, **начинающиеся** с указанного текста (регистронезависимо)
   - Пример: `https://t.me `  
     Удалит: `"https://t.me/join "`  
     Не удалит: `"Посмотри сюда: https://t.me "`

2. `*со_звёздочкой` → удаляет сообщения, **содержащие** подстроку (регистронезависимо)
   - Пример: `*реклама`  
     Удалит: `"Реклама казино"`, `"Это реклама"`, `"реклама запрещена"`  
     Не удалит: `"Рекламма"` (ошибка в слове)

